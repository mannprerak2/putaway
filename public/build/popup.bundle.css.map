{
  "version": 3,
  "file": "popup.bundle.css",
  "sources": [
    "Popup.svelte",
    "CollectionTilePopup.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onMount } from \"svelte\";\n  import CollectionTilePopup from \"./components/tiles/CollectionTilePopup.svelte\";\n\n  //font awesome icons\n  import Fa from \"sveltejs-fontawesome\";\n  //import { faSave } from '@fortawesome/free-solid-svg-icons/faSave'\n  import { faSave } from \"@fortawesome/free-regular-svg-icons/faSave\";\n  import { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\n  //font awesome icons\n\n  let searchText = \"\";\n  // array of BookmarkTreeNode\n  let allCollections = [];\n  let map = {};\n\n  let tab;\n  let savedId;\n  let isNewTab = false;\n  let sessionSaved = false;\n\n  onMount(() => {\n    chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n      tab = tabs[0];\n      if (tab.url != \"chrome://newtab/\") {\n        chrome.bookmarks.search({ url: tab.url }, function (bms) {\n          bms.forEach((b) => {\n            map[b.parentId] = true;\n          });\n        });\n        chrome.storage.local.get(\"pid\", function (res) {\n          chrome.bookmarks.getChildren(res.pid, function (children) {\n            // only folders\n            allCollections = children.filter((e) => e.url == null);\n          });\n        });\n      } else {\n        isNewTab = true;\n      }\n    });\n  });\n\n  var saveSession = () => {\n    if (sessionSaved) {\n      chrome.bookmarks.removeTree(savedId);\n      sessionSaved = false;\n    } else {\n      var dt = new Date();\n      let sessionName = `Session ${dt.getDate()}-${(\n        dt.getMonth() + 1\n      ).toLocaleString(\"en-US\", {\n        minimumIntegerDigits: 2,\n        useGrouping: false,\n      })}-${dt.getFullYear()}, ${dt.getHours()}:${dt\n        .getMinutes()\n        .toLocaleString(\"en-US\", {\n          minimumIntegerDigits: 2,\n          useGrouping: false,\n        })}:${dt\n        .getSeconds()\n        .toLocaleString(\"en-US\", {\n          minimumIntegerDigits: 2,\n          useGrouping: false,\n        })}`;\n\n      chrome.storage.local.get(\"pid\", function (map) {\n        chrome.bookmarks.create(\n          {\n            parentId: map.pid,\n            title: sessionName,\n            index: 0,\n          },\n          function (c) {\n            chrome.tabs.query(\n              {\n                currentWindow: true,\n              },\n              (tabs) => {\n                let allTabs = tabs.filter(function (tab) {\n                  return tab.url != \"chrome://newtab/\";\n                });\n                var count = allTabs.length;\n                allTabs.forEach((tab) => {\n                  chrome.bookmarks.create(\n                    {\n                      parentId: c.id,\n                      url: tab.url,\n                      title: tab.title + \":::::\" + tab.favIconUrl,\n                    },\n                    function (node) {\n                      count--;\n                      if (count == 0) {\n                        // reload tab to take effect\n                        savedId = c.id;\n                        sessionSaved = true;\n                      }\n                    }\n                  );\n                });\n              }\n            );\n          }\n        );\n      });\n    }\n  };\n\n  var openPutAway = () => {\n    chrome.tabs.create({ url: chrome.extension.getURL(\"newtab.html\") });\n  };\n</script>\n\n<style>\n  #popup {\n    width: 300px;\n    height: 400px;\n    display: block;\n  }\n\n  #main {\n    height: 350px;\n  }\n\n  #top {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding-bottom: 2px;\n    border-bottom: 1px solid rgb(201, 201, 201);\n    height: 50px;\n  }\n\n  #save-session {\n    width: 100%;\n    height: 50px;\n    border-top: 1px solid rgb(201, 201, 201);\n    text-align: center;\n    color: rgb(83, 81, 81);\n    font-size: 2em;\n    line-height: 50px;\n  }\n\n  #save-session:hover {\n    background-color: #e6e6e6;\n  }\n\n  input {\n    border: 1px dashed gray;\n    padding: 6px;\n    padding-left: 30px;\n    border-radius: 0 20px 20px 0;\n    font-size: 1.8em;\n    outline: none;\n    color: gray;\n    width: 70%;\n    margin: 5px;\n  }\n\n  #open-putaway {\n    flex-grow: 1;\n    text-align: center;\n    border-radius: 20px 0 0 20px;\n    border: 1px dashed gray;\n    margin: 5px;\n    padding: 2px;\n    color: gray;\n    font-size: 1.2em;\n  }\n\n  #open-putaway:hover {\n    background-color: #e6e6e6;\n  }\n\n  #list {\n    height: 300px;\n    overflow-y: scroll;\n    scrollbar-width: none;\n  }\n\n  #list::-webkit-scrollbar {\n    display: none;\n  }\n\n  #newtab-popup {\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    color: rgb(190, 190, 190);\n    font-size: 2em;\n  }\n\n  #newtab-open-putaway {\n    color: gray;\n    font-size: 1.2em;\n    border: 1px dashed gray;\n    border-radius: 50px;\n    padding: 10px;\n    margin: 10px;\n  }\n\n  #newtab-open-putaway:hover {\n    background-color: #e6e6e6;\n  }\n  #search-logo {\n    position: absolute;\n    right: 16.8rem;\n    opacity: 0.5;\n  }\n</style>\n\n<div id=\"popup\">\n  {#if !isNewTab}\n    <div id=\"main\">\n      <div id=\"top\">\n        <!-- svelte-ignore a11y-autofocus -->\n        <input autofocus type=\"text\" placeholder=\"Search\" bind:value={searchText} />\n        <div id=\"search-logo\">\n          <Fa icon={faSearch} size=\"2x\" />\n        </div>\n        <div id=\"open-putaway\" class=\"pointer\" on:click={openPutAway}>\n          Open\n          <br />\n          PutAway\n        </div>\n      </div>\n      <div id=\"list\">\n        {#each allCollections as collection, i (collection.id)}\n          {#if collection.title\n            .toLowerCase()\n            .includes(searchText.toLowerCase())}\n            <CollectionTilePopup\n              {collection}\n              {tab}\n              alreadySaved={map[collection.id]} />\n          {/if}\n        {/each}\n        <div style=\"height: 60px;\" />\n      </div>\n    </div>\n    <div id=\"save-session\" class=\"pointer\" on:click={saveSession}>\n      {#if sessionSaved}\n        ✓Saved (click to undo)\n      {:else}\n        <Fa\n          icon={faSave}\n          size=\"sm\"\n          style=\"position:relative; top:3px; opacity: 0.7;\" />\n        Save Session\n      {/if}\n    </div>\n  {:else}\n    <div id=\"newtab-popup\">\n      <img alt=\"logo\" src=\"images/logo128.png\" />\n      <div id=\"newtab-open-putaway\" class=\"pointer\" on:click={openPutAway}>\n        Open PutAway\n      </div>\n      <div>\n        This is an Empty Tab.\n        <br />\n        You cannot add this to a collection.\n      </div>\n    </div>\n  {/if}\n</div>\n",
    "<script>\n    export let collection;\n    export let tab;\n    export let alreadySaved;\n\n    let savedInThis = false;\n    if (alreadySaved) {\n        savedInThis = alreadySaved;\n    }\n\n    // will contain a bookmark if one was created rn\n    let bm;\n    var click = () => {\n        savedInThis = !savedInThis;\n\n        if (savedInThis) {\n            saveTabToBookmark(tab);\n        } else {\n            if (bm) {\n                chrome.bookmarks.remove(bm.id);\n            } else {\n                // remove all bookmarks in this with url of this tab\n                chrome.bookmarks.search({ url: tab.url }, function (bms) {\n                    bms.forEach((b) => {\n                        chrome.bookmarks.remove(b.id);\n                    });\n                });\n            }\n        }\n    };\n\n    function saveTabToBookmark(tab) {\n        chrome.bookmarks.create(\n            {\n                parentId: collection.id,\n                url: tab.url,\n                title: tab.title + \":::::\" + tab.favIconUrl,\n            },\n            function (node) {\n                bm = node;\n            }\n        );\n    }\n</script>\n\n<style>\n    .popup-collection-tile {\n        height: 50px;\n        width: 100%;\n        /* border-bottom: 1px solid rgb(201, 201, 201); */\n        color: gray;\n        padding-left: 15px;\n        box-sizing: border-box;\n        font-size: 2em;\n        line-height: 50px;\n        user-select: none;\n        font-weight: 600;\n        overflow: hidden;\n    }\n\n    .popup-collection-tile:hover {\n        background-color: #e6e6e6;\n    }\n\n    .save {\n        display: inline;\n        color: green;\n    }\n</style>\n\n<div\n    class=\"popup-collection-tile pointer\"\n    title={collection.title}\n    on:click={click}>\n    {#if savedInThis}\n        <div class=\"save\">✓</div>\n    {/if}\n    {collection.title}\n</div>\n<hr\n    style=\"border: 1px solid rgb(240, 240, 240); margin: 0; margin-left: 5px; margin-right: 5px;\" />\n"
  ],
  "names": [],
  "mappings": "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"
}