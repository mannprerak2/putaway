{"version":3,"file":"popup.bundle.js","sources":["../../src/components/tiles/CollectionTilePopup.svelte","../../node_modules/@fortawesome/free-regular-svg-icons/faSave.js","../../node_modules/@fortawesome/free-regular-svg-icons/faImage.js","../../src/Popup.svelte","../../src/popup.js"],"sourcesContent":["<script>\n    import { saveTabHook } from \"../../services/hooks.js\";\n    export let collection;\n    export let tab;\n    export let alreadySaved;\n\n    let savedInThis = false;\n    if (alreadySaved) {\n        savedInThis = alreadySaved;\n    }\n\n    // will contain a bookmark if one was created rn\n    let bm;\n    var click = () => {\n        savedInThis = !savedInThis;\n\n        if (savedInThis) {\n            saveTabToBookmark(tab);\n        } else {\n            if (bm) {\n                chrome.bookmarks.remove(bm.id);\n            } else {\n                // remove all bookmarks in this with url of this tab\n                chrome.bookmarks.search({ url: tab.url }, function (bms) {\n                    bms.forEach((b) => {\n                        chrome.bookmarks.remove(b.id);\n                    });\n                });\n            }\n        }\n    };\n\n    function saveTabToBookmark(tab) {\n        saveTabHook(tab)\n        chrome.bookmarks.create(\n            {\n                parentId: collection.id,\n                url: tab.url,\n                title: tab.title + \":::::\" + tab.favIconUrl,\n            },\n            function (node) {\n                bm = node;\n            }\n        );\n    }\n</script>\n\n<style>\n    .popup-collection-tile {\n        height: 50px;\n        width: 100%;\n        /* border-bottom: 1px solid rgb(201, 201, 201); */\n        color: gray;\n        padding-left: 15px;\n        box-sizing: border-box;\n        font-size: 2em;\n        line-height: 50px;\n        user-select: none;\n        font-weight: 600;\n        overflow: hidden;\n    }\n\n    .popup-collection-tile:hover {\n        background-color: #e6e6e6;\n    }\n\n    .save {\n        display: inline;\n        color: green;\n    }\n</style>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n    class=\"popup-collection-tile pointer\"\n    title={collection.title}\n    onclick={click}>\n    {#if savedInThis}\n        <div class=\"save\">✓</div>\n    {/if}\n    {collection.title}\n</div>\n<hr\n    style=\"border: 1px solid rgb(240, 240, 240); margin: 0; margin-left: 5px; margin-right: 5px;\" />\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar prefix = 'far';\nvar iconName = 'save';\nvar width = 448;\nvar height = 512;\nvar ligatures = [];\nvar unicode = 'f0c7';\nvar svgPathData = 'M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z';\n\nexports.definition = {\n  prefix: prefix,\n  iconName: iconName,\n  icon: [\n    width,\n    height,\n    ligatures,\n    unicode,\n    svgPathData\n  ]};\n\nexports.faSave = exports.definition;\nexports.prefix = prefix;\nexports.iconName = iconName;\nexports.width = width;\nexports.height = height;\nexports.ligatures = ligatures;\nexports.unicode = unicode;\nexports.svgPathData = svgPathData;","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar prefix = 'far';\nvar iconName = 'image';\nvar width = 512;\nvar height = 512;\nvar ligatures = [];\nvar unicode = 'f03e';\nvar svgPathData = 'M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z';\n\nexports.definition = {\n  prefix: prefix,\n  iconName: iconName,\n  icon: [\n    width,\n    height,\n    ligatures,\n    unicode,\n    svgPathData\n  ]};\n\nexports.faImage = exports.definition;\nexports.prefix = prefix;\nexports.iconName = iconName;\nexports.width = width;\nexports.height = height;\nexports.ligatures = ligatures;\nexports.unicode = unicode;\nexports.svgPathData = svgPathData;","<script>\n  import { onMount } from \"svelte\";\n  import CollectionTilePopup from \"./components/tiles/CollectionTilePopup.svelte\";\n  import { loadGlobalSettings } from \"./services/hooks.js\"\n\n  //font awesome icons\n  import Fa from \"sveltejs-fontawesome\";\n  //import { faSave } from '@fortawesome/free-solid-svg-icons/faSave'\n  import { faSave } from \"@fortawesome/free-regular-svg-icons/faSave\";\n  import { faImage } from \"@fortawesome/free-regular-svg-icons/faImage\";\n  import { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\n  //font awesome icons\n\n  let searchText = $state(\"\");\n  // array of BookmarkTreeNode\n  let allCollections = $state([]);\n  let map = $state({});\n\n  let tab = $state(undefined);\n  let savedId = $state(undefined);\n  let isNewTab = $state(false);\n  let sessionSaved = $state(false);\n  let quickLinkSaved = $state(false);\n\n  onMount(() => {\n    chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n      tab = tabs[0];\n      if (tab.url != \"chrome://newtab/\") {\n        chrome.bookmarks.search({ url: tab.url }, function (bms) {\n          bms.forEach((b) => {\n            map[b.parentId] = true;\n          });\n        });\n        chrome.storage.local.get(\"pid\", function (res) {\n          chrome.bookmarks.getChildren(res.pid, function (children) {\n            // only folders\n            allCollections = children.filter((e) => e.url == null);\n          });\n        });\n      } else {\n        isNewTab = true;\n      }\n    });\n    loadGlobalSettings()\n  });\n\n  const saveSession = () => {\n    if (sessionSaved) {\n      chrome.bookmarks.removeTree(savedId);\n      sessionSaved = false;\n    } else {\n      var dt = new Date();\n      let sessionName = `Session ${dt.getDate()}-${(\n        dt.getMonth() + 1\n      ).toLocaleString(\"en-US\", {\n        minimumIntegerDigits: 2,\n        useGrouping: false,\n      })}-${dt.getFullYear()}, ${dt.getHours()}:${dt\n        .getMinutes()\n        .toLocaleString(\"en-US\", {\n          minimumIntegerDigits: 2,\n          useGrouping: false,\n        })}:${dt.getSeconds().toLocaleString(\"en-US\", {\n        minimumIntegerDigits: 2,\n        useGrouping: false,\n      })}`;\n\n      chrome.storage.local.get(\"pid\", function (map) {\n        chrome.bookmarks.create(\n          {\n            parentId: map.pid,\n            title: sessionName,\n            index: 0,\n          },\n          function (c) {\n            chrome.tabs.query(\n              {\n                currentWindow: true,\n              },\n              (tabs) => {\n                let allTabs = tabs.filter(function (tab) {\n                  return tab.url != \"chrome://newtab/\";\n                });\n                var count = allTabs.length;\n                allTabs.forEach((tab) => {\n                  chrome.bookmarks.create(\n                    {\n                      parentId: c.id,\n                      url: tab.url,\n                      title: tab.title + \":::::\" + tab.favIconUrl,\n                    },\n                    function (node) {\n                      count--;\n                      if (count == 0) {\n                        // reload tab to take effect\n                        savedId = c.id;\n                        sessionSaved = true;\n                      }\n                    }\n                  );\n                });\n              }\n            );\n          }\n        );\n      });\n    }\n  };\n\n  const saveQuickLink = () => {\n    chrome.storage.sync.get(\"quickLinks\", async (v) => {\n      let quickLinks = [];\n      if (v.quickLinks) {\n        quickLinks = v.quickLinks;\n      }\n\n      if (quickLinkSaved) {\n        quickLinks.pop();\n      } else {\n        quickLinks.push({\n          icon: tab.favIconUrl,\n          url: tab.url,\n        });\n      }\n\n      chrome.storage.sync.set({ quickLinks: quickLinks });\n      quickLinkSaved = !quickLinkSaved;\n    });\n  };\n\n  const openPutAway = () => {\n    chrome.tabs.create({ url: chrome.runtime.getURL(\"newtab.html\") });\n  };\n</script>\n\n<div id=\"popup\">\n  {#if !isNewTab}\n    <div id=\"main\">\n      <div id=\"top\">\n        <!-- svelte-ignore a11y_autofocus -->\n        <input\n          autofocus\n          type=\"text\"\n          placeholder=\"Search\"\n          bind:value={searchText}\n        />\n        <div id=\"search-logo\">\n          <Fa icon={faSearch} size=\"2x\" />\n        </div>\n        <div id=\"open-putaway\" class=\"pointer\" onclick={openPutAway}>\n          Open\n          <br />\n          PutAway\n        </div>\n      </div>\n      <div id=\"list\">\n        {#each allCollections as collection, i (collection.id)}\n          {#if collection.title\n            .toLowerCase()\n            .includes(searchText.toLowerCase())}\n            <CollectionTilePopup\n              {collection}\n              {tab}\n              alreadySaved={map[collection.id]}\n            />\n          {/if}\n        {/each}\n        <div style=\"height: 60px;\" />\n      </div>\n    </div>\n    <div\n      id=\"save-session\"\n      class=\"pointer big-popup-button\"\n      onclick={saveSession}\n    >\n      {#if sessionSaved}\n        ✓Saved (click to undo)\n      {:else}\n        <Fa\n          icon={faSave}\n          size=\"sm\"\n          style=\"position:relative; top:3px; opacity: 0.7;\"\n        />\n        Save Session\n      {/if}\n    </div>\n    <div\n      id=\"save-quicklink\"\n      class=\"pointer big-popup-button\"\n      onclick={saveQuickLink}\n    >\n      {#if quickLinkSaved}\n        ✓Saved (click to undo)\n      {:else}\n        <Fa\n          icon={faImage}\n          size=\"sm\"\n          style=\"position:relative; top:3px; opacity: 0.7;\"\n        />\n        Save Quick Link\n      {/if}\n    </div>\n  {:else}\n    <div id=\"newtab-popup\">\n      <img alt=\"logo\" src=\"images/logo128.png\" />\n      <div id=\"newtab-open-putaway\" class=\"pointer\" onclick={openPutAway}>\n        Open PutAway\n      </div>\n      <div>\n        This is an Empty Tab.\n        <br />\n        You cannot add this to a collection.\n      </div>\n    </div>\n  {/if}\n</div>\n\n<style>\n  #popup {\n    width: 300px;\n    height: 400px;\n    display: block;\n  }\n\n  #main {\n    height: 350px;\n  }\n\n  #top {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding-bottom: 2px;\n    border-bottom: 1px solid rgb(201, 201, 201);\n    height: 50px;\n  }\n\n  .big-popup-button {\n    width: 100%;\n    height: 50px;\n    border-top: 1px solid rgb(201, 201, 201);\n    text-align: center;\n    color: rgb(83, 81, 81);\n    font-size: 2em;\n    line-height: 50px;\n  }\n\n  .big-popup-button:hover {\n    background-color: #e6e6e6;\n  }\n\n  input {\n    border: 1px dashed gray;\n    padding: 6px;\n    padding-left: 30px;\n    border-radius: 0 20px 20px 0;\n    font-size: 1.8em;\n    outline: none;\n    color: gray;\n    width: 70%;\n    margin: 5px;\n  }\n\n  #open-putaway {\n    flex-grow: 1;\n    text-align: center;\n    border-radius: 20px 0 0 20px;\n    border: 1px dashed gray;\n    margin: 5px;\n    padding: 2px;\n    color: gray;\n    font-size: 1.2em;\n  }\n\n  #open-putaway:hover {\n    background-color: #e6e6e6;\n  }\n\n  #list {\n    height: 300px;\n    overflow-y: scroll;\n    scrollbar-width: none;\n  }\n\n  #list::-webkit-scrollbar {\n    display: none;\n  }\n\n  #newtab-popup {\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    color: rgb(190, 190, 190);\n    font-size: 2em;\n  }\n\n  #newtab-open-putaway {\n    color: gray;\n    font-size: 1.2em;\n    border: 1px dashed gray;\n    border-radius: 50px;\n    padding: 10px;\n    margin: 10px;\n  }\n\n  #newtab-open-putaway:hover {\n    background-color: #e6e6e6;\n  }\n  #search-logo {\n    position: absolute;\n    right: 16.8rem;\n    opacity: 0.5;\n  }\n</style>\n","import { mount } from 'svelte'\nimport App from \"./Popup.svelte\";\n\nconst app = mount(App, {\n  target: document.body,\n})\n\nexport default app"],"names":["collection","$.prop","$$props","tab","alreadySaved","savedInThis","$.set","bm","click","$.get","saveTabToBookmark","bms","b","saveTabHook","node","$$render","consequent","$.untrack","exports","prefix","iconName","width","height","ligatures","unicode","svgPathData","searchText","allCollections","$.state","$.proxy","map","savedId","isNewTab","sessionSaved","quickLinkSaved","onMount","tabs","res","children","e","loadGlobalSettings","saveSession","dt","sessionName","c","allTabs","count","saveQuickLink","v","quickLinks","openPutAway","faSearch","$.each","node_3","faSave","consequent_1","alternate","faImage","consequent_2","alternate_1","$.bind_value","input","$$value","alternate_2","consequent_3","mount","App"],"mappings":"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","x_google_ignoreList":[1,2]}